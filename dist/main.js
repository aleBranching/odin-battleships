(()=>{"use strict";function e(e){let t=0;const r=e;return{isSunk:()=>t>=r,hit:()=>{t+=1},_length:r,placed:!1,coordinates:void 0}}function t(){const t=[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]],r=[null,e(4),e(3),e(3),e(2),e(2),e(2),e(1),e(1),e(1),e(1)],o=[],n=e=>{let t=0;return(r=>{for(let r=0;r<o.length;r++)o[r]===e&&t++})(),t<{1:4,2:3,3:2,4:1}[e]},a=[];return{placeShip:(e,a,c,l)=>{if(a<0||c<0||a>10||c>10)throw new Error((e=>{console.error("can't place ship here or no more of these ships or ship too big")}));if(!n)throw new Error((e=>{console.error("can't put anymore of these ships")}));let i;if((()=>{const r=(()=>{const t=[];if(l){if(l){let r=a;for(let o=0;o<e;o++)if(t.push([r,c]),r++,r>10)throw new Error("Boat out of game!")}}else{let r=c;for(let o=0;o<e;o++)if(t.push([a,r]),r++,r>10)throw new Error("boat out of game!")}return t})();return!!(()=>{let e=!0;return r.forEach((r=>{const o=r[0],n=r[1];0!==t[n][o]&&(e=!1)})),e})()&&(console.log("The naive coord",e,r),i=[...r],!0)})()&&n(e)){const n=(e=>{let t;for(let o=0;o<=10;o++)if(null!=r[o]&&r[o]._length===e&&!1===r[o].placed){t=o;break}return t})(e);r[n].placed=!0,o.push(e),r[n].coordinates=i,i.forEach((e=>{const r=e[0],o=e[1];t[o][r]=n}))}},gameArena:t,receiveAttack:(e,o)=>{if(0!==t[o][e]){const n=t[o][e];r[n].hit()}else a.push([e,o])},allShipsSunk:()=>{let e=0;for(let t=1;t<11;t++)r[t].isSunk()&&e++;return e>=10},missedShots:a,currentShipsOBJ:r}}const r=function(){const e=(e,t,r)=>document.querySelector(`.${e} .row[data-x="${t}"] .box[data-y="${r}"]`);return{renderExistingBoats:(t,r)=>{const o=([t,o])=>{e(r,t,o).style.backgroundColor="grey"};t.currentShipsOBJ.forEach((e=>{null==e||e.coordinates.forEach(o)}))},getBoxDOM:e,enemyBoxDOMListener:e=>{document.querySelectorAll(".enemyArea .row .box").forEach((t=>{t.addEventListener("click",(t=>{if(!0!==t.target.dataset.hit){const[r,o]=(e=>{const{y:t}=e.target.dataset,{x:r}=e.target.parentElement.dataset;return[r,t]})(t);t.target.dataset.hit="true",e.receiveAttack(r,o),console.log("the x and Y",r,o)}}))}))}}}();console.log("test"),console.log("change"),(()=>{const e=t(),o=t();var n,a;a=o,(n=e).placeShip(4,0,0,!0),n.placeShip(3,6,0,!0),n.placeShip(3,0,1,!0),n.placeShip(2,0,3,!0),n.placeShip(2,0,5,!0),n.placeShip(2,9,6,!1),n.placeShip(1,2,7,!0),n.placeShip(1,3,8,!0),n.placeShip(1,4,9,!0),n.placeShip(1,7,9,!0),a.placeShip(4,0,0,!0),a.placeShip(3,6,0,!0),a.placeShip(3,0,1,!0),a.placeShip(2,0,3,!0),a.placeShip(2,0,5,!0),a.placeShip(2,9,6,!1),a.placeShip(1,2,7,!0),a.placeShip(1,3,8,!0),a.placeShip(1,4,9,!0),a.placeShip(1,7,9,!0),r.renderExistingBoats(e,"playerArea"),r.enemyBoxDOMListener(o)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFHLEVBQUcsR0FBRyxHQUM5Qm1ELEVBQVduRCxVQUFVLEVBQUcsRUFBRyxHQUFHLEdBQzlCbUQsRUFBV25ELFVBQVUsRUFBRyxFQUFHLEdBQUcsR0FDOUJtRCxFQUFXbkQsVUFBVSxFQUFHLEVBQUcsR0FBRyxHQUM5Qm1ELEVBQVduRCxVQUFVLEVBQUcsRUFBRyxHQUFHLEdBQzlCbUQsRUFBV25ELFVBQVUsRUFBRyxFQUFHLEdBQUcsR0FDOUJtRCxFQUFXbkQsVUFBVSxFQUFHLEVBQUcsR0FBRyxHQUU5Qm9ELEVBQVdwRCxVQUFVLEVBQUcsRUFBRyxHQUFHLEdBQzlCb0QsRUFBV3BELFVBQVUsRUFBRyxFQUFHLEdBQUcsR0FDOUJvRCxFQUFXcEQsVUFBVSxFQUFHLEVBQUcsR0FBRyxHQUM5Qm9ELEVBQVdwRCxVQUFVLEVBQUcsRUFBRyxHQUFHLEdBQzlCb0QsRUFBV3BELFVBQVUsRUFBRyxFQUFHLEdBQUcsR0FDOUJvRCxFQUFXcEQsVUFBVSxFQUFHLEVBQUcsR0FBRyxHQUM5Qm9ELEVBQVdwRCxVQUFVLEVBQUcsRUFBRyxHQUFHLEdBQzlCb0QsRUFBV3BELFVBQVUsRUFBRyxFQUFHLEdBQUcsR0FDOUJvRCxFQUFXcEQsVUFBVSxFQUFHLEVBQUcsR0FBRyxHQUM5Qm9ELEVBQVdwRCxVQUFVLEVBQUcsRUFBRyxHQUFHLEdBUWhDcUQsRUFBYWxCLG9CQUFvQmMsRUFBaUIsY0FDbERJLEVBQWFaLG9CQUFvQlMsRUFBZSxFQUtsREksRSIsInNvdXJjZXMiOlsid2VicGFjazovL29kaW4tYmF0dGxlc2hpcHMvLi9zcmMvbG9naWMvc2hpcC5qcyIsIndlYnBhY2s6Ly9vZGluLWJhdHRsZXNoaXBzLy4vc3JjL2xvZ2ljL2dhbWVib2FyZC5qcyIsIndlYnBhY2s6Ly9vZGluLWJhdHRsZXNoaXBzLy4vc3JjL2xvZ2ljL1VJY29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly9vZGluLWJhdHRsZXNoaXBzLy4vc3JjL2xvZ2ljL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFNoaXAobGVuZ3RoKSB7XG4gIGxldCBfaGl0cyA9IDA7XG4gIGNvbnN0IF9sZW5ndGggPSBsZW5ndGg7XG4gIGNvbnN0IHBsYWNlZCA9IGZhbHNlO1xuICBsZXQgY29vcmRpbmF0ZXM7XG5cbiAgY29uc3QgaGl0ID0gKCkgPT4ge1xuICAgIF9oaXRzICs9IDE7XG4gIH07XG5cbiAgY29uc3QgaXNTdW5rID0gKCkgPT4gX2hpdHMgPj0gX2xlbmd0aDtcblxuICAvLyAgIHRoaXMubGVuZ3RoID0gbGVuZ3RoO1xuXG4gIC8vICAgdGhpcy5fc3VuayA9IGZhbHNlO1xuICAvLyAgIHRoaXMuX2hpdHMgPSAwO1xuXG4gIC8vICAgZnVuY3Rpb24gaGl0KCkge1xuICAvLyAgICAgdGhpcy5faGl0cyA9ICsxO1xuICAvLyAgICAgLy9cbiAgLy8gICB9XG5cbiAgLy8gICBmdW5jdGlvbiBpc1N1bmsoKSB7XG4gIC8vICAgICByZXR1cm4gdGhpcy5faGl0cyA+PSBsZW5ndGggPyB0cnVlIDogZmFsc2U7XG4gIC8vICAgICAvL1xuICAvLyAgIH1cblxuICByZXR1cm4geyBpc1N1bmssIGhpdCwgX2xlbmd0aCwgcGxhY2VkLCBjb29yZGluYXRlcyB9O1xufVxuIiwiaW1wb3J0IFNoaXAgZnJvbSBcIi4vc2hpcFwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBHYW1lYm9hcmQoKSB7XG4gIC8vIGVhY2ggbnVtYmVyIGNvcnJlc3BvbmRzIHRvIGluZGV4IG9mIGN1cnJlbnRTaGlwc09CSlxuICBjb25zdCBnYW1lQXJlbmEgPSBbXG4gICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAgIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgICBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gICAgWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICBdO1xuXG4gIGNvbnN0IGN1cnJlbnRTaGlwc09CSiA9IFtcbiAgICBudWxsLFxuICAgIFNoaXAoNCksXG4gICAgU2hpcCgzKSxcbiAgICBTaGlwKDMpLFxuICAgIFNoaXAoMiksXG4gICAgU2hpcCgyKSxcbiAgICBTaGlwKDIpLFxuICAgIFNoaXAoMSksXG4gICAgU2hpcCgxKSxcbiAgICBTaGlwKDEpLFxuICAgIFNoaXAoMSksXG4gIF07XG5cbiAgY29uc3QgbmV3U2hpcEluZGV4ID0gKGxlbmd0aCkgPT4ge1xuICAgIGxldCBpbmRleDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8PSAxMDsgaSsrKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZyhcIlRISVNcIiwgY3VycmVudFNoaXBzT0JKW2ldLl9sZW5ndGgpO1xuICAgICAgaWYgKGN1cnJlbnRTaGlwc09CSltpXSA9PSBudWxsKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICBjdXJyZW50U2hpcHNPQkpbaV0uX2xlbmd0aCA9PT0gbGVuZ3RoICYmXG4gICAgICAgIGN1cnJlbnRTaGlwc09CSltpXS5wbGFjZWQgPT09IGZhbHNlXG4gICAgICApIHtcbiAgICAgICAgaW5kZXggPSBpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGluZGV4O1xuICB9O1xuXG4gIGNvbnN0IF9wbGFjZWRTaGlwcyA9IFtdO1xuXG4gIGNvbnN0IHNoaXBOdW1iZXJSdWxlc1Bhc3NlZCA9IChsZW5ndGgpID0+IHtcbiAgICBjb25zdCBfYWxsb3dlZE9jY3VyYW5jZXMgPSB7XG4gICAgICAxOiA0LFxuICAgICAgMjogMyxcbiAgICAgIDM6IDIsXG4gICAgICA0OiAxLFxuICAgIH07XG4gICAgbGV0IGxlbmd0aE9jY2N1cmVkID0gMDtcbiAgICBjb25zdCBfb2NjdXJhbmNlcyA9ICh0YXJnZXRMZW5ndGgpID0+IHtcbiAgICAgIC8vIGxldCBjb3VudGVyID0gMDtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBfcGxhY2VkU2hpcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKF9wbGFjZWRTaGlwc1tpXSA9PT0gbGVuZ3RoKSB7XG4gICAgICAgICAgbGVuZ3RoT2NjY3VyZWQrKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgX29jY3VyYW5jZXMoKTtcblxuICAgIGlmIChsZW5ndGhPY2NjdXJlZCA8IF9hbGxvd2VkT2NjdXJhbmNlc1tsZW5ndGhdKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgY29uc3QgcGxhY2VTaGlwID0gKGxlbmd0aCwgeCwgeSwgaG9yaXpvbnRhbGx5KSA9PiB7XG4gICAgLy8gdGVzdCB2YWxpZGl0eSBvZiBjby1vcmQgb3IgYW1vdW50IG9mIHNoaXBzXG4gICAgaWYgKHggPCAwIHx8IHkgPCAwIHx8IHggPiAxMCB8fCB5ID4gMTApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigoZSkgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgIFwiY2FuJ3QgcGxhY2Ugc2hpcCBoZXJlIG9yIG5vIG1vcmUgb2YgdGhlc2Ugc2hpcHMgb3Igc2hpcCB0b28gYmlnXCJcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICghc2hpcE51bWJlclJ1bGVzUGFzc2VkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoKGUpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcImNhbid0IHB1dCBhbnltb3JlIG9mIHRoZXNlIHNoaXBzXCIpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgbGV0IGNoZWNrZWRDb29yZDtcblxuICAgIGNvbnN0IGNoZWNrQ29vcmQgPSAoKSA9PiB7XG4gICAgICAvLyB3aGF0IHdvdWxkIHRoZXkgYmUgbmFpdmVseVxuXG4gICAgICBjb25zdCBuYWl2ZUNvb3IgPSAoKCkgPT4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBbXTtcblxuICAgICAgICBpZiAoIWhvcml6b250YWxseSkge1xuICAgICAgICAgIGxldCBuZXdZID0geTtcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaChbeCwgbmV3WV0pO1xuICAgICAgICAgICAgbmV3WSsrO1xuICAgICAgICAgICAgaWYgKG5ld1kgPiAxMCkge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJib2F0IG91dCBvZiBnYW1lIVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoaG9yaXpvbnRhbGx5KSB7XG4gICAgICAgICAgbGV0IG5ld1ggPSB4O1xuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKFtuZXdYLCB5XSk7XG4gICAgICAgICAgICBuZXdYKys7XG4gICAgICAgICAgICBpZiAobmV3WCA+IDEwKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkJvYXQgb3V0IG9mIGdhbWUhXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9KSgpO1xuXG4gICAgICBjb25zdCBjaGVja0Zvck92ZXJsYXAgPSAoKSA9PiB7XG4gICAgICAgIGxldCBhbGxvd2VkID0gdHJ1ZTtcblxuICAgICAgICBuYWl2ZUNvb3IuZm9yRWFjaCgoY29vcmRpbmF0ZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGFuWCA9IGNvb3JkaW5hdGVbMF07XG4gICAgICAgICAgY29uc3QgYW5ZID0gY29vcmRpbmF0ZVsxXTtcblxuICAgICAgICAgIC8vIGluIGdhbWVhcmVuYSBmaXJzdCBoYXZlIHRvIGFjY2VzcyBZXG5cbiAgICAgICAgICBpZiAoZ2FtZUFyZW5hW2FuWV1bYW5YXSAhPT0gMCkge1xuICAgICAgICAgICAgYWxsb3dlZCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGFsbG93ZWQ7XG4gICAgICB9O1xuXG4gICAgICBpZiAoY2hlY2tGb3JPdmVybGFwKCkpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJUaGUgbmFpdmUgY29vcmRcIiwgbGVuZ3RoLCBuYWl2ZUNvb3IpO1xuICAgICAgICBjaGVja2VkQ29vcmQgPSBbLi4ubmFpdmVDb29yXTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgLy8gY29uc29sZS5sb2coXCJUSElTXCIsIHNoaXBOdW1iZXJSdWxlc1Bhc3NlZChsZW5ndGgpKTtcbiAgICBpZiAoY2hlY2tDb29yZCgpICYmIHNoaXBOdW1iZXJSdWxlc1Bhc3NlZChsZW5ndGgpKSB7XG4gICAgICBjb25zdCBzaGlwT0JKSW5kZXggPSBuZXdTaGlwSW5kZXgobGVuZ3RoKTtcbiAgICAgIGN1cnJlbnRTaGlwc09CSltzaGlwT0JKSW5kZXhdLnBsYWNlZCA9IHRydWU7XG4gICAgICBfcGxhY2VkU2hpcHMucHVzaChsZW5ndGgpO1xuXG4gICAgICBjdXJyZW50U2hpcHNPQkpbc2hpcE9CSkluZGV4XS5jb29yZGluYXRlcyA9IGNoZWNrZWRDb29yZDtcbiAgICAgIGNoZWNrZWRDb29yZC5mb3JFYWNoKChhQ29vcmRpbmF0ZSkgPT4ge1xuICAgICAgICBjb25zdCBuZXd4ID0gYUNvb3JkaW5hdGVbMF07XG4gICAgICAgIGNvbnN0IG5ld3kgPSBhQ29vcmRpbmF0ZVsxXTtcblxuICAgICAgICBnYW1lQXJlbmFbbmV3eV1bbmV3eF0gPSBzaGlwT0JKSW5kZXg7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IG1pc3NlZFNob3RzID0gW107XG5cbiAgY29uc3QgcmVjZWl2ZUF0dGFjayA9ICh4LCB5KSA9PiB7XG4gICAgaWYgKGdhbWVBcmVuYVt5XVt4XSAhPT0gMCkge1xuICAgICAgY29uc3Qgc2hpcE9CSkluZGV4ID0gZ2FtZUFyZW5hW3ldW3hdO1xuICAgICAgY3VycmVudFNoaXBzT0JKW3NoaXBPQkpJbmRleF0uaGl0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1pc3NlZFNob3RzLnB1c2goW3gsIHldKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgYWxsU2hpcHNTdW5rID0gKCkgPT4ge1xuICAgIGxldCBjb3VudGVyID0gMDtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IDExOyBpKyspIHtcbiAgICAgIGlmIChjdXJyZW50U2hpcHNPQkpbaV0uaXNTdW5rKCkpIHtcbiAgICAgICAgY291bnRlcisrO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoY291bnRlciA+PSAxMCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIHBsYWNlU2hpcCxcbiAgICBnYW1lQXJlbmEsXG4gICAgcmVjZWl2ZUF0dGFjayxcbiAgICBhbGxTaGlwc1N1bmssXG4gICAgbWlzc2VkU2hvdHMsXG4gICAgY3VycmVudFNoaXBzT0JKLFxuICB9O1xufVxuIiwiaW1wb3J0IEdhbWVib2FyZCBmcm9tIFwiLi9nYW1lYm9hcmRcIjtcblxuZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uIFVJY29udHJvbGxlcigpIHtcbiAgY29uc3QgZ2V0Qm94RE9NID0gKGFyZWEsIHgsIHkpID0+XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7YXJlYX0gLnJvd1tkYXRhLXg9XCIke3h9XCJdIC5ib3hbZGF0YS15PVwiJHt5fVwiXWApO1xuXG4gIGNvbnN0IHJlbmRlckV4aXN0aW5nQm9hdHMgPSAoZ2FtZUFyZW5hLCBwbGF5ZXJBcmVhRE9NKSA9PiB7XG4gICAgY29uc3QgdXBkYXRlRWFjaERPTUNvb3JkaW5hdGUgPSAoW3gsIHldKSA9PiB7XG4gICAgICBnZXRCb3hET00ocGxheWVyQXJlYURPTSwgeCwgeSkuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJncmV5XCI7XG4gICAgfTtcblxuICAgIGdhbWVBcmVuYS5jdXJyZW50U2hpcHNPQkouZm9yRWFjaCgoYVNoaXApID0+IHtcbiAgICAgIGlmIChhU2hpcCA9PSBudWxsKSB7XG4gICAgICAgIC8vIG51bGxcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFTaGlwLmNvb3JkaW5hdGVzLmZvckVhY2godXBkYXRlRWFjaERPTUNvb3JkaW5hdGUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IGVuZW15Qm94RE9NTGlzdGVuZXIgPSAoZ2FtZUFyZW5hKSA9PiB7XG4gICAgY29uc3QgZ2V0WGFuZFkgPSAoZSkgPT4ge1xuICAgICAgY29uc3QgeyB5IH0gPSBlLnRhcmdldC5kYXRhc2V0O1xuICAgICAgY29uc3QgeyB4IH0gPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQ7XG5cbiAgICAgIC8vICAgY29uc29sZS5sb2coXCJ0aGUgY29vcmRcIiwgeCwgeSk7XG4gICAgICByZXR1cm4gW3gsIHldO1xuICAgIH07XG5cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmVuZW15QXJlYSAucm93IC5ib3hcIikuZm9yRWFjaCgoYUJveCkgPT4ge1xuICAgICAgYUJveC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgICAgaWYgKGUudGFyZ2V0LmRhdGFzZXQuaGl0ICE9PSB0cnVlKSB7XG4gICAgICAgICAgY29uc3QgW3gsIHldID0gZ2V0WGFuZFkoZSk7XG4gICAgICAgICAgZS50YXJnZXQuZGF0YXNldC5oaXQgPSBcInRydWVcIjtcblxuICAgICAgICAgIGdhbWVBcmVuYS5yZWNlaXZlQXR0YWNrKHgsIHkpO1xuICAgICAgICAgIC8vICAgZGVidWdnZXI7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJ0aGUgeCBhbmQgWVwiLCB4LCB5KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgcmV0dXJuIHsgcmVuZGVyRXhpc3RpbmdCb2F0cywgZ2V0Qm94RE9NLCBlbmVteUJveERPTUxpc3RlbmVyIH07XG59KSgpO1xuIiwiaW1wb3J0IEdhbWVib2FyZCBmcm9tIFwiLi9nYW1lYm9hcmRcIjtcbmltcG9ydCBVSWNvbnRyb2xsZXIgZnJvbSBcIi4vVUljb250cm9sbGVyXCI7XG5cbmNvbnNvbGUubG9nKFwidGVzdFwiKTtcbmNvbnNvbGUubG9nKFwiY2hhbmdlXCIpO1xuXG4vLyBjb25zdCB0ZXN0ID0gZ2V0Qm94RE9NKFwiZW5lbXlBcmVhXCIsIDAsIDApO1xuXG5jb25zdCBnYW1lTG9vcCA9ICgpID0+IHtcbiAgY29uc3QgZ2FtZU92ZXIgPSBmYWxzZTtcblxuICAvLyBbNCwgNCwgNCwgNCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gIC8vIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgLy8gWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAvLyBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gIC8vIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgLy8gWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAvLyBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG4gIC8vIFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXSxcbiAgLy8gWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdLFxuICAvLyBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0sXG5cbiAgY29uc3Qgc2V0VXBQbGFjZW1lbnRzID0gKGdhbWVib2FyZDEsIGdhbWVib2FyZDIpID0+IHtcbiAgICBnYW1lYm9hcmQxLnBsYWNlU2hpcCg0LCAwLCAwLCB0cnVlKTtcbiAgICBnYW1lYm9hcmQxLnBsYWNlU2hpcCgzLCA2LCAwLCB0cnVlKTtcbiAgICBnYW1lYm9hcmQxLnBsYWNlU2hpcCgzLCAwLCAxLCB0cnVlKTtcbiAgICBnYW1lYm9hcmQxLnBsYWNlU2hpcCgyLCAwLCAzLCB0cnVlKTtcbiAgICBnYW1lYm9hcmQxLnBsYWNlU2hpcCgyLCAwLCA1LCB0cnVlKTtcbiAgICBnYW1lYm9hcmQxLnBsYWNlU2hpcCgyLCA5LCA2LCBmYWxzZSk7XG4gICAgZ2FtZWJvYXJkMS5wbGFjZVNoaXAoMSwgMiwgNywgdHJ1ZSk7XG4gICAgZ2FtZWJvYXJkMS5wbGFjZVNoaXAoMSwgMywgOCwgdHJ1ZSk7XG4gICAgZ2FtZWJvYXJkMS5wbGFjZVNoaXAoMSwgNCwgOSwgdHJ1ZSk7XG4gICAgZ2FtZWJvYXJkMS5wbGFjZVNoaXAoMSwgNywgOSwgdHJ1ZSk7XG5cbiAgICBnYW1lYm9hcmQyLnBsYWNlU2hpcCg0LCAwLCAwLCB0cnVlKTtcbiAgICBnYW1lYm9hcmQyLnBsYWNlU2hpcCgzLCA2LCAwLCB0cnVlKTtcbiAgICBnYW1lYm9hcmQyLnBsYWNlU2hpcCgzLCAwLCAxLCB0cnVlKTtcbiAgICBnYW1lYm9hcmQyLnBsYWNlU2hpcCgyLCAwLCAzLCB0cnVlKTtcbiAgICBnYW1lYm9hcmQyLnBsYWNlU2hpcCgyLCAwLCA1LCB0cnVlKTtcbiAgICBnYW1lYm9hcmQyLnBsYWNlU2hpcCgyLCA5LCA2LCBmYWxzZSk7XG4gICAgZ2FtZWJvYXJkMi5wbGFjZVNoaXAoMSwgMiwgNywgdHJ1ZSk7XG4gICAgZ2FtZWJvYXJkMi5wbGFjZVNoaXAoMSwgMywgOCwgdHJ1ZSk7XG4gICAgZ2FtZWJvYXJkMi5wbGFjZVNoaXAoMSwgNCwgOSwgdHJ1ZSk7XG4gICAgZ2FtZWJvYXJkMi5wbGFjZVNoaXAoMSwgNywgOSwgdHJ1ZSk7XG4gIH07XG5cbiAgLy8gICB3aGlsZSAoIWdhbWVPdmVyKSB7XG4gIGNvbnN0IHBsYXllckdhbWVib2FyZCA9IEdhbWVib2FyZCgpO1xuICBjb25zdCBlbmVteUdhbWVib2FyZCA9IEdhbWVib2FyZCgpO1xuICBzZXRVcFBsYWNlbWVudHMocGxheWVyR2FtZWJvYXJkLCBlbmVteUdhbWVib2FyZCk7XG5cbiAgVUljb250cm9sbGVyLnJlbmRlckV4aXN0aW5nQm9hdHMocGxheWVyR2FtZWJvYXJkLCBcInBsYXllckFyZWFcIik7XG4gIFVJY29udHJvbGxlci5lbmVteUJveERPTUxpc3RlbmVyKGVuZW15R2FtZWJvYXJkKTtcblxuICAvLyAgIH1cbn07XG5cbmdhbWVMb29wKCk7XG4iXSwibmFtZXMiOlsiU2hpcCIsImxlbmd0aCIsIl9oaXRzIiwiX2xlbmd0aCIsImlzU3VuayIsImhpdCIsInBsYWNlZCIsImNvb3JkaW5hdGVzIiwiR2FtZWJvYXJkIiwiZ2FtZUFyZW5hIiwiY3VycmVudFNoaXBzT0JKIiwiX3BsYWNlZFNoaXBzIiwic2hpcE51bWJlclJ1bGVzUGFzc2VkIiwibGVuZ3RoT2NjY3VyZWQiLCJ0YXJnZXRMZW5ndGgiLCJpIiwiX29jY3VyYW5jZXMiLCJtaXNzZWRTaG90cyIsInBsYWNlU2hpcCIsIngiLCJ5IiwiaG9yaXpvbnRhbGx5IiwiRXJyb3IiLCJlIiwiY29uc29sZSIsImVycm9yIiwiY2hlY2tlZENvb3JkIiwibmFpdmVDb29yIiwicmVzdWx0IiwibmV3WCIsInB1c2giLCJuZXdZIiwiYWxsb3dlZCIsImZvckVhY2giLCJjb29yZGluYXRlIiwiYW5YIiwiYW5ZIiwiY2hlY2tGb3JPdmVybGFwIiwibG9nIiwiY2hlY2tDb29yZCIsInNoaXBPQkpJbmRleCIsImluZGV4IiwibmV3U2hpcEluZGV4IiwiYUNvb3JkaW5hdGUiLCJuZXd4IiwibmV3eSIsInJlY2VpdmVBdHRhY2siLCJhbGxTaGlwc1N1bmsiLCJjb3VudGVyIiwiZ2V0Qm94RE9NIiwiYXJlYSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInJlbmRlckV4aXN0aW5nQm9hdHMiLCJwbGF5ZXJBcmVhRE9NIiwidXBkYXRlRWFjaERPTUNvb3JkaW5hdGUiLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsImFTaGlwIiwiZW5lbXlCb3hET01MaXN0ZW5lciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJhQm94IiwiYWRkRXZlbnRMaXN0ZW5lciIsInRhcmdldCIsImRhdGFzZXQiLCJwYXJlbnRFbGVtZW50IiwiZ2V0WGFuZFkiLCJwbGF5ZXJHYW1lYm9hcmQiLCJlbmVteUdhbWVib2FyZCIsImdhbWVib2FyZDEiLCJnYW1lYm9hcmQyIiwiVUljb250cm9sbGVyIiwiZ2FtZUxvb3AiXSwic291cmNlUm9vdCI6IiJ9